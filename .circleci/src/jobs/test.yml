parameters:
  service:
    description: "Service to test"
    type: string
machine:
  image: ubuntu-2204:current
  docker_layer_caching: true
resource_class: large
steps:
  - checkout:
      path: '~/audius-protocol'
  - run: AUDIUS_DEV=false bash ~/audius-protocol/dev-tools/setup.sh
  - run:
      name: test run "<< parameters.service >>"
      no_output_timeout: 20m
      command: . ~/.profile; audius-compose test run "<< parameters.service >>"
