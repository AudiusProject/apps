version: "3.9"

x-storagev2:
  &storagev2
  build: mediorum
  restart: unless-stopped
  profiles:
    - storagev2

services:
  storagev2-1:
    container_name: audius-protocol-storagev2-1
    <<: *storagev2
    environment:
      - dirTemplate=/data/mediorum_dev_%d
      - dbUrlTemplate=postgresql://postgres:postgres@db:5432/mediorum%d
    ports:
      - 1991:1991
      - 1992:1992
      - 1993:1993
      - 1994:1994
      - 1995:1995
    volumes:
      - mediorum1:/data
