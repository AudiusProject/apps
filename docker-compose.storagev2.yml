version: "3.9"

x-storagev2:
  &storagev2
  build: ../mediorum
  restart: unless-stopped
  environment:
    - MEDIORUM_ENV=single
    - PORT=1991
  profile:
    - storagev2

services:
  storagev2-1:
    container_name: audius-protocol-storagev2-1
    <<: *storagev2
    volumes:
      - mediorum1:/tmp/mediorum_dev_1991

  storagev2-2:
    container_name: audius-protocol-storagev2-2
    <<: *storagev2
    volumes:
      - mediorum2:/tmp/mediorum_dev_1991

  storagev2-3:
    container_name: audius-protocol-storagev2-3
    <<: *storagev2
    volumes:
      - mediorum3:/tmp/mediorum_dev_1991
