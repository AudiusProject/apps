version: '3'

services:
  app-template:
    container_name: app-template
    build:
      context: .
      dockerfile: ./docker/Dockerfile
      args:
        app_name: app-template
        TURBO_TEAM: '${TURBO_TEAM}'
        TURBO_TOKEN: '${TURBO_TOKEN}'
    restart: always
    command: npm run dev
    env_file:
      - .env

  trending-challenge-rewards:
    container_name: trending-challenge-rewards
    build:
      context: .
      dockerfile: ./docker/Dockerfile
      args:
        app_name: trending-challenge-rewards
        TURBO_TEAM: '${TURBO_TEAM}'
        TURBO_TOKEN: '${TURBO_TOKEN}'
    restart: always
    command: npm run dev
    env_file:
      - .env

  sla-auditor:
    container_name: sla-auditor
    build:
      context: .
      dockerfile: ./docker/Dockerfile
      args:
        app_name: sla-auditor
        TURBO_TEAM: '${TURBO_TEAM}'
        TURBO_TOKEN: '${TURBO_TOKEN}'
    restart: always
    command: npm run dev
    volumes:
      - ./apps/sla-auditor/:/app/apps/sla-auditor
      - /app/apps/sla-auditor/node_modules/
    env_file:
      - .env

  relay:
    container_name: relay
    build:
      context: .
      dockerfile: ./docker/Dockerfile
      args:
        app_name: relay
        TURBO_TEAM: '${TURBO_TEAM}'
        TURBO_TOKEN: '${TURBO_TOKEN}'
    restart: always
    command: npm run dev
    env_file:
      - .env
